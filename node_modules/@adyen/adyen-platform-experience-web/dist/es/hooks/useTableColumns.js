import { useMemo as p } from "../external/preact/hooks/dist/hooks.module.js";
import { getLabel as c } from "../components/utils/getLabel.js";
import b from "../core/Context/useCoreContext.js";
import { EMPTY_OBJECT as a } from "../utils/value/constants.js";
import { isUndefined as l, isString as v } from "../utils/value/is.js";
function y(r) {
  let e = {};
  for (const t of Object.keys(r))
    l(r[t]) || (e = { ...e, [t]: r[t] });
  return e;
}
function T(r) {
  return r.every(v);
}
const P = ({
  fields: r,
  customColumns: e,
  columnConfig: t
}) => {
  const { i18n: n } = b(), o = p(() => r.map((i) => ({ key: i })), [r]);
  return p(() => ((e ? T(e) ? e.map((s) => ({ key: s })) : e : void 0) || o).map(({ key: s, flex: f }) => {
    const d = n.get(c(s)), m = y((t == null ? void 0 : t[s]) || a);
    return { key: s, label: d, visible: !0, flex: f, ...m || a };
  }), [t, e, n, o]);
};
export {
  P as useTableColumns
};
